# üÉè Reglas del Jodete - Gu√≠a completa

## Objetivo del juego

Ser el primer jugador en quedarse sin cartas en la mano.

## El mazo

- **40 cartas** espa√±olas: 4 palos (Oros, Copas, Espadas, Bastos)
- **Valores**: 1 (As), 2, 3, 4, 5, 6, 7, 10, 11, 12

## Inicio de la partida

1. Los jugadores se unen al lobby (m√≠nimo 2, m√°ximo 6 jugadores)
2. El anfitri√≥n elige cu√°ntas cartas se reparten a cada jugador
3. Se coloca una carta boca arriba para empezar la pila de descarte
4. El turno va rotando en el sentido determinado (inicialmente en sentido horario)

## Reglas b√°sicas

### ¬øCu√°ndo puedo jugar una carta?

Para jugar una carta, debe cumplir **AL MENOS UNA** de estas condiciones:

1. **Mismo palo** que la carta superior de la pila
2. **Mismo n√∫mero** que la carta superior
3. **Es un 10** (comod√≠n) - ver reglas especiales

### ¬øQu√© hago si no puedo jugar?

Si no ten√©s ninguna carta jugable:

1. **Rob√°s UNA carta del mazo**
2. **Si la carta robada es jugable**, pod√©s jugarla INMEDIATAMENTE en el mismo turno
3. **Si no es jugable**, tu turno termina y pasa al siguiente jugador

---

## üé¥ Cartas especiales

### üî¥ Dos (2) - Acumulaci√≥n de cartas

- **Efecto**: El siguiente jugador debe robar **+2 cartas**
- **Encadenable**: Si el siguiente jugador tiene un 2, puede jugarlo y acumular +4, +6, +8...
- **Importante**:
  - Si hay doses acumulados, **SOLO** pod√©s jugar otro 2
  - **NI SIQUIERA el 10 (comod√≠n) se puede usar** cuando hay doses acumulados
  - Si no ten√©s otro 2, deb√©s robar todas las cartas acumuladas y perder el turno

**Ejemplo:**

```
Jugador A juega 2 de Oros ‚Üí +2 acumulado
Jugador B juega 2 de Copas ‚Üí +4 acumulado
Jugador C no tiene 2 ‚Üí Roba 4 cartas y pierde el turno
```

### ‚è≠Ô∏è Cuatro (4) - Salto

- **Efecto**: Salta al siguiente jugador
- **Resultado**: El jugador que deber√≠a seguir pierde su turno
- **Se puede encadenar**: Si el siguiente jugador tambi√©n tiene un 4, puede jugarlo y saltear al siguiente

### üîÑ Once (11) - Repetici√≥n

- **Efecto**: El mismo jugador debe jugar otra vez
- **Restricci√≥n**: Debe jugar una carta del **mismo palo** O **otro 11**
- **Si no tiene**: Debe robar del mazo
- **Termina** cuando el jugador juega una carta que NO sea 11

**Ejemplo:**

```
Jugador A juega 11 de Oros
‚Üí Debe jugar otra carta de Oros o cualquier otro 11
‚Üí Si juega 5 de Oros: turno normal contin√∫a
‚Üí Si juega 11 de Copas: debe repetir con Copas u otro 11
```

### üÉè Diez (10) - Comod√≠n

- **Efecto**: Se puede jugar **EN CUALQUIER MOMENTO**
- **Excepci√≥n**: NO se puede jugar cuando hay doses (2) acumulados
- **Al jugar**: Eleg√≠s el nuevo palo que seguir√° la partida
- **Es la carta m√°s vers√°til**: √ösala estrat√©gicamente para cambiar de palo

**Casos de uso:**

```
‚úÖ Carta superior: 7 de Oros ‚Üí Jug√°s 10 de Espadas ‚Üí Eleg√≠s "Copas"
‚úÖ Carta superior: As de Bastos ‚Üí Jug√°s 10 de cualquier palo
‚ùå Hay 2 acumulados (+4) ‚Üí NO pod√©s jugar el 10
```

### ‚Ü©Ô∏è Doce (12) - Inversi√≥n

- **Efecto**: Invierte el sentido del juego
- **Con 3+ jugadores**: Cambia de horario a antihorario o viceversa
- **Con 2 jugadores**: Act√∫a como un salto (el otro jugador pierde el turno)

**Ejemplo con 4 jugadores:**

```
Antes: A ‚Üí B ‚Üí C ‚Üí D ‚Üí A
Jugador B juega 12
Despu√©s: B ‚Üí A ‚Üí D ‚Üí C ‚Üí B
```

---

## ‚ö†Ô∏è Penalizaciones

### No avisar "√öltima carta"

- **Cu√°ndo**: Cuando te qued√°s con una sola carta en la mano
- **Debes**: Hacer clic en el bot√≥n "¬°√öltima carta!" antes de que termine tu turno
- **Si no avis√°s**: Cualquier jugador puede gritar "¬°Jodete!" y **rob√°s 2 cartas**
- **Ventana de oportunidad**: Desde que jug√°s tu pen√∫ltima carta hasta que el siguiente jugador juegue

### Jugar fuera de turno

- **Si intent√°s jugar cuando no es tu turno**: El sistema lo bloquea autom√°ticamente

---

## üèÜ Victoria

- **Ganador**: El primer jugador en quedarse sin cartas
- **Anuncio**: Se muestra un mensaje de victoria y se puede reiniciar la partida
- **Flash de victoria**: La pantalla parpadea en verde para el ganador

---

## üí° Estrategias y consejos

### Uso del 10 (comod√≠n)

- **Guardalo** para situaciones cr√≠ticas donde no tengas opciones
- **√ösalo** para cambiar a un palo del que tengas muchas cartas
- **NO lo uses** si ya ten√©s una carta jugable del mismo palo/n√∫mero

### Manejo del 11 (repetici√≥n)

- **Ten√©s ventaja** si ten√©s varias cartas del mismo palo
- **Riesgo**: Si no pod√©s repetir, rob√°s del mazo y el efecto persiste

### Defensa contra el 2 (acumulaci√≥n)

- **Guard√° un 2** para defenderte de cadenas de doses
- **Observ√°** cu√°ntos doses se jugaron (m√°ximo 4 en todo el mazo)

### Avisar √∫ltima carta

- **NO OLVID√âS** hacer clic en "¬°√öltima carta!" cuando te quede solo una
- **Los otros jugadores** est√°n atentos para gritarte "¬°Jodete!"

---

## üéØ Flujo de un turno t√≠pico

1. **Es tu turno** (indicado visualmente en la interfaz)
2. **Opciones**:
   - **A)** Hacer clic en una carta jugable de tu mano
   - **B)** Si no ten√©s cartas jugables, hacer clic en "Robar del mazo"
3. **Si robaste**:
   - Si la carta robada es jugable, pod√©s jugarla inmediatamente
   - Si no, tu turno termina autom√°ticamente
4. **Si jugaste**:
   - Cartas especiales aplican sus efectos
   - Si te qued√°s con 1 carta: ¬°Avis√° "√öltima carta"!
   - Si te qued√°s con 0 cartas: ¬°Ganaste!
5. **Turno pasa** al siguiente jugador (respetando saltos e inversiones)

---

## üìù Resumen de reglas especiales

| Carta  | Nombre       | Efecto                                           | Se puede responder          |
| ------ | ------------ | ------------------------------------------------ | --------------------------- |
| **2**  | Dos          | +2 cartas al siguiente                           | S√≠, con otro 2 (acumulable) |
| **4**  | Cuatro       | Salta al siguiente                               | S√≠, con otro 4              |
| **10** | Diez/Comod√≠n | Jugable siempre (excepto con doses), eleg√≠s palo | No                          |
| **11** | Once         | Repet√≠s turno con mismo palo u otro 11           | No                          |
| **12** | Doce         | Invierte sentido (o salta con 2 jugadores)       | No                          |

---

## ‚ùì Preguntas frecuentes

**P: ¬øPuedo jugar un 10 cuando hay un 2 en la pila?**  
R: Solo si hay doses **acumulados** (pendientes de robar). Si simplemente hay un 2 en la pila pero ya se resolvi√≥, s√≠ pod√©s jugarlo.

**P: ¬øQu√© pasa si robo del mazo y la carta es un 11?**  
R: Pod√©s jugarlo inmediatamente y deber√°s repetir turno con el mismo palo u otro 11.

**P: ¬øPuedo jugar un 10 para responder a un 2?**  
R: NO. Cuando hay doses acumulados, solo se puede jugar otro 2.

**P: ¬øQu√© pasa si me olvido de avisar "√∫ltima carta"?**  
R: Cualquier jugador puede hacer clic en "¬°Jodete!" y deber√°s robar 2 cartas como penalizaci√≥n.

**P: ¬øEl 12 siempre invierte el sentido?**  
R: S√≠, pero con 2 jugadores solo act√∫a como salto (el otro jugador pierde el turno).

**P: ¬øPuedo jugar m√∫ltiples cartas en un turno?**  
R: Solo en caso del 11 (repetici√≥n). El resto de las cartas terminan tu turno normalmente.

---

## üéÆ Interfaz y controles

- **Tu mano**: Cartas en la parte inferior de la pantalla
- **Pila de descarte**: Carta central grande (la √∫ltima jugada)
- **Mazo**: Bot√≥n para robar (solo activo en tu turno)
- **Bot√≥n "¬°√öltima carta!"**: Aparece cuando te queda 1 carta
- **Bot√≥n "¬°Jodete!"**: Para penalizar a quien no avis√≥ √∫ltima carta
- **Modal de palo**: Aparece autom√°ticamente al jugar un 10
- **Log de eventos**: Panel derecho con historial de acciones
- **Indicador de turno**: Resalta al jugador actual

---

## üîß Implementaci√≥n t√©cnica

Estas reglas est√°n implementadas en `server/game.js`:

- **Validaci√≥n de jugadas**: M√©todo `isPlayable(card)`
- **L√≥gica de doses**: `pendingDraw` + restricci√≥n en `isPlayable`
- **Comod√≠n (10)**: Permitido siempre excepto cuando `pendingDraw > 0`
- **Robo inteligente**: `handleDraw` verifica si la carta robada es jugable
- **Repetici√≥n (11)**: Variable `repeatConstraint` mantiene el palo activo
- **Inversi√≥n (12)**: Variable `direction` multiplica por -1

---

**Versi√≥n del documento**: 1.1  
**√öltima actualizaci√≥n**: 13 de octubre de 2025
